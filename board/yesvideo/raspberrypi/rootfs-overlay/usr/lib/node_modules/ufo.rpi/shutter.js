var gpio = require('rpi-gpio');
var pins = require('./pins');
var interrupts = require('./interrupts');

var shutter = new (require('events').EventEmitter)();

function reset() {
    shutter.removeAllListeners();

    interrupts.watch(pins.shutter, function(val) {
        if (val == 1) {
console.log("shutter");
            shutter.emit('on');
        }
    });
}

function notify(cb) {
    shutter.on('on', cb);
}

module.exports = {
    reset: reset,
    notify: notify
};